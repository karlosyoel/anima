(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7277],{44577:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=n(50029),a=n(87794),s=n.n(a),i=n(67294),o=n(16517),c=n(40782),l=n(19428),u=n(92105),d=n.n(u),f=n(94184),p=n.n(f),m=n(58413),h=n(18185),g=n(55946),x=function(e){return(0,g.h)("/api/auth/start",{method:"POST",body:{data:e}})},v=n(46942),w=n(42379),b=n(74700),y=n(98435),j=n(44471),k=n(57179),_=n(54193),S=n(53781),N=n(59499),C=n(4730),z=n(57630),B=n(85893),D=["children"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T,I=(0,z.withAnalytics)({events:"onClick"})((function(e){var t=e.children,n=(0,C.Z)(e,D);return(0,B.jsx)("button",P(P({},n),{},{children:t}))})),L=n(74040),Z=n(8193),E=n(33084);function A(e){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://render.readyplayer.me/render",{method:"POST",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.renders);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.male="ArmatureTargetMale",e.female="ArmatureTargetFemale"}(T||(T={}));var F=n(38221),U=n(33277);function R(e){var t=(0,i.useState)(""),n=t[0],a=t[1],c=(0,i.useState)(""),u=c[0],d=c[1],f=(0,i.useState)(""),p=f[0],m=f[1],h=(0,l.useTranslation)(["common","wizard","hub"]).t,g=(0,o.useSelector)(S.dy),x=(0,o.useDispatch)(),v=e.partnerData.render_settings;return(0,i.useEffect)((function(){var t=g._id;v.render_image&&e.glbUrl&&t&&(0,r.Z)(s().mark((function n(){var r,i,o,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={model:e.glbUrl,scene:v.scene||"".concat(e.bodyType,"-portrait-v1"),blendShapes:v.blend_shapes,armature:"ArmatureTarget".concat((0,y.kC)(e.gender))},n.prev=1,i=e.renderUrl||"",!e.needsUpdate&&i){n.next=11;break}return n.next=6,A(r);case 6:if((o=n.sent)&&0!==o.length){n.next=9;break}throw new E.XF({resource:"wizard",code:"rendering_failed"});case 9:i=o[0],(0,U.ak)({userId:t,url:e.glbUrl,renderUrl:i});case 11:c=(0,y.Lo)(i),a(i),m("".concat(window.location.origin,"/gallery/").concat(c)),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(1),d(h("wizard:errors.rendering_failed")),x({type:"error",error:n.t0});case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()}),[e.glbUrl]),(0,B.jsx)(B.Fragment,{children:v.render_image&&e.glbUrl?(0,B.jsx)("div",{className:"w-full flex justify-center",style:{minHeight:"341px"},children:n?(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)("img",{src:n}),!e.disableControls&&(0,B.jsxs)("div",{className:"flex justify-center px-4 py-3",children:[(0,B.jsx)(F.Z,{onClick:function(){return(0,y.GN)(n,"ReadyPlayerMe-Avatar.png")},text:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("svg",{className:"inline mr-2 relative",style:{bottom:"1px"},width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.jsx)("path",{d:"M0 11.6667H12V13H0V11.6667ZM6.66667 7.78133L10.714 3.73333L11.6567 4.676L6 10.3333L0.343333 4.67667L1.286 3.73333L5.33333 7.78V0.333334H6.66667V7.78133Z",fill:"#1C1D22"})}),(0,B.jsxs)("span",{children:[h("common:download")," ",(0,B.jsx)("span",{className:"hidden sm:inline",children:h("common:image")})]})]}),className:"p-3 w-full mr-2"}),(0,B.jsx)(F.Z,{href:"https://\ud835\udd31witter.com/intent/tweet?text=I just created my cross-game %23ReadyPlayerMe avatar from @readyplayerme %23avatar ".concat(p),target:"_blank",text:(0,B.jsxs)("div",{className:"text-white",children:[(0,B.jsx)(Z.h3E,{className:"inline mr-2 relative",style:{bottom:"2px"},size:18}),"Tweet"]}),color:F.r.Custom,className:"p-3 w-full bg-blue-500 hover:bg-blue-600 text-center",eventName:"complete sharing",addReportedExtras:{share:"tweet"}})]})]}):(0,B.jsx)("div",{className:"flex flex-col m-auto text-center p-4",children:u?(0,B.jsx)("div",{children:u}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"mx-auto",children:(0,B.jsx)(L.FadeLoader,{color:"#3ce1f7"})}),(0,B.jsx)("div",{children:h("hub:renderingAvatar")}),(0,B.jsx)("div",{children:h("wizard:loadDurationMessage")})]})})}):(0,B.jsx)("div",{style:{minHeight:"40px"}})})}var V,G=n(16143),H=n(79145),Q=n.n(H),W=n(98913),X=n.n(W),J=n(99837);!function(e){e.male="ArmatureTargetMale",e.female="ArmatureTargetFemale"}(V||(V={}));var q="https://render-pack.readyplayer.me/render";function K(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q,{method:"POST",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.renders);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=n(94545),ee=n.n($),te=["gottaRun","idea","lo","emotional","confused","superHero","angry","raining","rogerThat","thumbsUp","tooCold","hungry","sad","relaxed","tooHot","goodNight","sorry","no","coffee","busy","omg","ok","happyBirthday","flowers","love","hello","dance","thank","tired","waiting","goodMorning","link","profileImage"],ne=function(e){var t=e.url,n=e.renderSettings,a=e.gender,o=e.onClose,c=(0,i.useState)([]),u=c[0],d=c[1],f=(0,i.useState)(0),p=f[0],m=f[1],h=(0,l.useTranslation)(["common","wizard"]).t,g=(0,i.useCallback)((0,r.Z)(s().mark((function e(){var r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={model:t,scene:n.scene,armature:"male"===a?V.male:V.female,width:370,height:320,renders:n.blend_shapes},i=setInterval((function(){m((function(e){return e+(e<95?5:0)}))}),1e3),e.next=4,K(r);case 4:o=e.sent,clearInterval(i),d(o);case 7:case"end":return e.stop()}}),e)}))),[a,n,t]);(0,i.useEffect)((function(){g()}),[g]);return(0,B.jsx)("div",{className:ee().stickers,style:{textAlign:"center"},children:u.length>0?(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{children:h("wizard:yourProfilePicture")}),(0,B.jsx)("img",{alt:"thumb",src:u[32],className:ee().profilePicture})]}),(0,B.jsx)("br",{}),(0,B.jsx)("div",{children:h("wizard:yourStickers")}),(0,B.jsx)("div",{className:"mx-auto grid gap-2 sm:w-[430px] sm:grid-cols-4 grid-cols-3 w-[320px]",children:u.map((function(e,t){return t<12&&(0,B.jsx)("div",{style:{textAlign:"center"},children:(0,B.jsx)("img",{alt:"name",src:e,className:ee().sticker})},t.toString())}))}),(0,B.jsx)("br",{}),(0,B.jsxs)("div",{className:"mx-auto grid gap-2 sm:w-[430px] w-[320px] items-center justify-center grid-cols-2",children:[(0,B.jsx)(F.Z,{text:h("common:edit"),onClick:o,color:F.r.Primary}),(0,B.jsx)(F.Z,{text:h("common:apply"),onClick:function(){var e={readyPlayerMe:{stickers:{}}};X()(33,(function(t){e.readyPlayerMe.stickers[te[t]]=u[t]}));var t=window.ReactNativeWebView;t&&t.postMessage(JSON.stringify(e)),window.parent.postMessage(JSON.stringify(e),"*")}})]})]}):(0,B.jsxs)("div",{className:ee().loader,children:[(0,B.jsx)("p",{className:"text-lg",children:h("wizard:loadingYourStickers")}),(0,B.jsx)("div",{className:ee().progress,children:(0,B.jsx)(J.x1,{percent:p,strokeWidth:3})})]})})},re=function(e){var t=e.header,n=e.message,r=e.html,a=e.loader,s=e.showLogo,i=e.close,o=e.setState,c=e.onCloseCallback;return(0,B.jsxs)(v.u,{children:[i&&(0,B.jsx)(v.u.Header,{onCloseCallback:function(){o(b.Qz.Disabled),c()},children:t&&(0,B.jsx)("h3",{className:"text-lg text-center leading-6 font-medium",children:t})}),(0,B.jsxs)(v.u.Body,{children:[n&&(0,B.jsx)("div",{className:"py-6 pb-3",children:(0,B.jsx)("p",{className:"text-center text-lg",children:n})}),r&&r,a&&(0,B.jsx)("div",{className:"loading no-bg text-center p-4",children:(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:Q().pulseLoader,children:(0,B.jsx)(d(),{size:8})}),s&&(0,B.jsx)("div",{className:p()(Q().poweredByLogo,"relative inline-block"),children:(0,B.jsx)(j.Z,{})})]})})]})]})};re.defaultProps={html:"",close:!1,header:"",message:"",loader:""};var ae=function(e){var t,n,r=e.url,a=e.renderUrl,s=e.shortCode,c=e.gender,u=e.bodyType,d=e.partnerData,f=e.needsUpdate,g=e.message,x=e.disableDownloadGLB,v=e.setState,j=e.onCloseCallback,k=(0,i.useState)(!1),N=k[0],C=k[1],z=(0,l.useTranslation)(["common","wizard"]).t,D=(0,o.useSelector)(S.dy),O=(0,i.useRef)(null),P=(0,m.iz)().logEvent;function T(){v(b.Qz.Disabled),j()}return(0,i.useEffect)((function(){_.ZP.post({name:"avatar.exported",message:{avatarUrl:r,userId:D._id},version:d.config.postmessage_version}),h.P.emit("v1.avatar.exported",{url:r,userId:D._id}),(0,y.vp)()&&T()}),[r]),null!==(t=d.config)&&void 0!==t&&t.show_bake_success_modal||v(b.Qz.Disabled),(0,B.jsxs)("div",{id:"bake-modal",children:[d.render_settings.render_stickers&&r?(0,B.jsx)("div",{className:"content py-8",children:(0,B.jsx)(ne,{url:r,gender:c,onClose:T,renderSettings:d.render_settings})}):(0,B.jsxs)("div",{children:[(0,B.jsx)(R,{glbUrl:r,renderUrl:a,gender:c,bodyType:u,partnerData:d,needsUpdate:f}),(0,B.jsxs)("div",{className:"content px-4",children:[g,(0,B.jsx)("div",{className:p()(Q().importToButton,"max-w-xs mx-auto"),children:(0,B.jsx)(G.Z,{partnerConfig:d.config,glbUrl:r,gender:c,logEvent:P})}),(null===(n=d.config)||void 0===n?void 0:n.avatar_short_code)&&s&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{className:"mb-3 text-center",children:z("wizard:yourAvatarCode")}),(0,B.jsx)("h1",{className:"mb-3 text-4xl text-center select-all",children:s})]}),!x&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{className:"mb-3 text-center",children:z("wizard:downloadAvatar")}),(0,B.jsx)("div",{className:"copy-area",children:(0,B.jsx)(w.X,{id:"avatarGlbUrl",ref:O,fieldValue:r,buttonText:z(N?"common:copied":"common:copy"),onFieldChange:function(){},onClick:function(){(0,y.vQ)(r,O),C(!0)}})})]}),d.tutorial&&(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:"mb-2",children:z("wizard:mozillaInstruction")}),(0,B.jsx)("img",{className:"shadow",src:"/images/tutorial.jpg",alt:"tutorial"})]})]})]}),d.license&&(0,B.jsxs)("div",{className:"center text-center mt-8 text-xs p-4",children:[z("wizard:thisWorkBy")," ",(0,B.jsxs)("span",{property:"cc:attributionName",children:["$",z("common:wolfprint3D")]})," ",z("wizard:isLicensedUnderA")," \xa0",(0,B.jsx)("a",{rel:"license",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",children:z("wizard:creativeCommonsAttribution")})]})]})},se=function(e){var t,n,a,u,f=e.partnerData,p=e.setState,h=(0,m.iz)().logEvent,g=(0,o.useSelector)(S.dy),v=(0,l.useTranslation)(["wizard","common"]).t,b=(0,i.useState)(""),y=b[0],j=b[1],_=(0,i.useState)(""),N=_[0],C=_[1],z=(0,i.useState)(!1),D=z[0],O=z[1],P=(0,o.useDispatch)(),T=(0,k.al)(f),L=!T&&(0,k.ej)("rpm-skipsignup");if(g.email||L)return setTimeout((function(){return p(!0)}),100),(0,B.jsx)(B.Fragment,{});function Z(){return""!==y&&y.indexOf("@")>=0}function E(){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,target:f.target})}).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O(!0),Z()){e.next=4;break}throw new Error(v("wizard:errors.wrong_email"));case 4:return e.next=6,x({id:g._id,email:y});case 6:P(S.sv.actions.upsert({email:y})),c.Am.success(v("wizard:toastEmailSent")),h("partner signup modal",{"email submitted":!0}),E(),p(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),C(e.t0.message);case 16:return e.prev=16,O(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})))).apply(this,arguments)}var F=(null===(t=f.config)||void 0===t?void 0:t.subscribe_form_text)||"".concat(v("wizard:defaultSubscribeFormText"));return(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:"py-4",children:(null===(n=f.config)||void 0===n?void 0:n.logo_in_ui)&&""!==(null===(a=f.config)||void 0===a?void 0:a.top_logo)&&(0,B.jsx)("img",{alt:"logo",className:"modal-logo",src:null===(u=f.config)||void 0===u?void 0:u.top_logo,style:{margin:"0px auto",height:"40px"}})}),(0,B.jsxs)("div",{id:"email-modal",className:"p-4",children:[(0,B.jsx)("div",{className:"mb-4 text-left",children:F}),(0,B.jsx)("p",{className:"mb-4 text-xs text-gray-500 text-left",children:v("wizard:signupModelInfo")}),(0,B.jsx)("div",{className:"send-area",children:(0,B.jsx)(w.X,{type:"email",placeholder:"you@example.com",buttonText:D?(0,B.jsx)(d(),{color:"#ffffff",size:"8px"}):v("common:send"),buttonDisabled:D,onFieldChange:function(e){C(""),j(e.target.value)},onClick:function(){return M.apply(this,arguments)}})}),(0,B.jsx)("div",{className:"text-red-700 text-center",children:N}),(0,B.jsx)("div",{className:"text-center",children:(0,B.jsx)(I,{id:"skip-email",type:"button",onClick:function(){oe(T),p(!0)},className:"my-6 cursor-pointer text-center text-sm",eventName:"partner signup modal",addReportedExtras:{"email submitted":!1},children:v("wizard:skipSignup")})})]})]})};function ie(e){var t,n,r=(0,i.useState)(!1),a=r[0],s=r[1],o=(0,m.iz)().logEvent,c=(0,l.useTranslation)(["common","wizard"]).t,u=e.message,d=e.partnerData,f=e.showLogo,p=e.bodyType,h=e.needsUpdate,g=e.renderUrl,x=e.url,v=e.shortCode,w=e.gender,y=e.disableDownloadGLB,j=e.state,_=e.onChangeState,S=e.onCloseCallback,N=!(null!==(t=d.render_settings)&&void 0!==t&&t.render_stickers),C=(0,k.al)(d),z=(0,B.jsx)(B.Fragment,{});if((null===(n=d.config)||void 0===n||!n.skip_email_popup)&&!a&&j!==b.Qz.Disabled&&j!==b.Qz.Success){var D=(0,B.jsx)(se,{setState:s,partnerData:d});return z=(0,B.jsx)(re,{setState:_,html:D,onCloseCallback:function(){o("partner signup modal",{"email submitted":!1}),oe(C),_(b.Qz.Baking),s(!0)},showLogo:f,close:N})}switch(j){case b.Qz.Loading:z=(0,B.jsx)(re,{setState:_,message:c("common:loading"),loader:!0,onCloseCallback:S,showLogo:f,close:N});break;case b.Qz.Baking:z=(0,B.jsx)(re,{setState:_,message:c("wizard:preparingAvatar"),loader:!0,onCloseCallback:S,showLogo:f,close:N});break;case b.Qz.Failed:z=(0,B.jsx)(re,{setState:_,message:c("wizard:preparingErrorMessage"),onCloseCallback:S,showLogo:f,close:N});break;case b.Qz.Success:var O=(0,B.jsx)(ae,{needsUpdate:h,shortCode:v,url:x,renderUrl:g,partnerData:d,gender:w,bodyType:p,disableDownloadGLB:y,onCloseCallback:S,message:u,setState:_});z=(0,B.jsx)(re,{setState:_,html:O,onCloseCallback:S,showLogo:f,close:N})}return z}function oe(e){e||(0,k.d8)("rpm-skipsignup","true",{"max-age":1209600})}},4301:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(67294),a=n(80629),s=n(2212),i=n(69365),o=n(74700),c=n(52217),l=n(68807);(0,a.l7)({OrbitControls:i.z});var u,d=.5,f=Number.POSITIVE_INFINITY,p=!0,m=new s.Vector3(-.15,0,.55),h=new s.Vector3(-.11,0,.48),g=new s.Vector3(-.51,0,2.41);function x(e){var t=e.fullBody,n=e.gender,x=e.camTarget,v=e.initialCamDistance,w=e.headScale,b=void 0===w?1:w,y=(0,a.Ky)(),j=y.camera,k=y.gl,_=y.scene,S=(null===x||void 0===x?void 0:x.fullBody)||1.475+b/10,N="male"===n?S+.075:S,C=(null===x||void 0===x?void 0:x.halfBody)||.1;return(0,r.useEffect)((function(){if((u=new i.z(j,k.domElement)).enablePan=!1,d+=b/10,u.minDistance=t?d:.5,u.maxDistance=t?2.5:1.4,u.minPolarAngle=1.4,u.maxPolarAngle=1.4,!_.getObjectByName("DirectionalLight")){var e=new s.DirectionalLight(16777215);e.name=e.type,e.intensity=.001,e.shadow.bias=-1e-4,e.shadow.mapSize.height=1024,e.shadow.mapSize.width=1024,e.castShadow=!0,e.position.set(t?3:2,t?5:2,t?0:-2);var n=new s.DirectionalLight(11007);n.name="back-highlight",n.intensity=5,n.position.set(-3,5,-5),n.castShadow=!0,n.shadow.bias=-1e-4,n.shadow.mapSize.height=1024,n.shadow.mapSize.width=1024;var r=new s.AmbientLight(16774582);r.name=r.type,r.intensity=.25,r.position.set(0,0,0);var a=new s.SpotLight(16774582,1,0,.314,0,1);a.name=a.type,a.position.set(12,10,7.5),j.add(r),j.add(a),j.add(e),j.add(n),_.add(j)}u.target.set(0,t?N:C,0),u.update(),v&&(j.position.z=t?v.fullBody:v.halfBody,u.update());var c=function(e){var n=u.target.distanceTo(j.position);e.detail&&(((p=!t||e.detail.category!==o.Rj.Shirt)&&n>(t?1.2:.7)||!p&&n<1.7)&&(f=0))};return l.A.subscribe(c),function(){u.dispose(),l.A.unsubscribe(c)}}),[t,n]),(0,a.xQ)((function(e,n){!function(e,t,n){if(u&&n){var r=u.target.distanceTo(e.position),a=((r=(0,c.Lh)(r,2.5,d))-d)/(2.5-d);u.target.set(0,t-.6*a,0)}}(j,N,t),function(e,t,n){var r=n?p?h:g:m;f<=1&&(e.position.setX((0,c.EH)(e.position.x,r.x,f)),e.position.setZ((0,c.EH)(e.position.z,r.z,f)),f+=t)}(j,n,t),u.update()})),null}},89362:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),a=n(80629),s=n(2212),i=n(92666);function o(e){var t=e.hdri,n=(0,a.Ky)(),o=n.gl,c=n.scene;return(0,r.useEffect)((function(){var e=new s.PMREMGenerator(o),n=new i.x;n.setDataType(s.UnsignedByteType),e.compileEquirectangularShader(),t&&n.load(t,(function(t){var n=e.fromEquirectangular(t).texture;c.environment=n,t.dispose(),e.dispose()}))}),[o]),null}(0,a.l7)({RGBELoader:i.x})},16143:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(67294),a=n(92105),s=n.n(a),i=n(19428),o=n(98709),c=n(85893);function l(e){var t,n=e.partnerConfig,a=e.glbUrl,l=e.gender,u=e.logEvent,d=e.isAvatarConnected,f=void 0===d||d,p=(0,r.useState)(!1),m=p[0],h=p[1],g=(0,i.useTranslation)("common").t,x=function(e,t,n){return e?e.replace("{glb_url}",encodeURIComponent(t)).replace("{gender}",n):""};return(0,c.jsx)(c.Fragment,{children:n.import_url&&(0,c.jsxs)("div",{className:"import-to block mb-8 rounded-lg w-full md:w-80",style:f?{animation:"glowing 750ms",animationIterationCount:5}:{},children:[(0,c.jsx)("a",{className:"".concat(null!==(t=!f)&&void 0!==t?t:"cursor-not-allowed "),target:n.new_tab&&f?"_blank":"",href:f?x(n.import_url,a,l):"#",style:{textDecoration:"none"},rel:"noreferrer",children:(0,c.jsx)(o.z,{type:f?"default":"ghost",block:!0,disabled:!f,size:"large",onClick:function(){if(!m&&f){if(u("import to app",{"app name":n.name}),n.cookie_url){var e=x(n.cookie_url,a,l);fetch(e,{mode:"no-cors",credentials:"include"})}h(!0)}},children:(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2 m-auto",children:[(0,c.jsx)("div",{className:"text-lg text-right",children:g(m?"importingTo":"importTo")}),(0,c.jsxs)("div",{children:[m&&(0,c.jsx)("div",{className:"loading no-bg float-left m-1",children:(0,c.jsx)("div",{children:(0,c.jsx)(s(),{size:4})})}),(0,c.jsx)("img",{className:"mx-auto",src:n.top_logo,style:{maxHeight:"25px",maxWidth:"60px"}})]})]})})}),m&&n.download_message&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{dangerouslySetInnerHTML:{__html:n.download_message}}),(0,c.jsx)("hr",{className:"mt-6"})]})]})})}},42379:function(e,t,n){"use strict";n.d(t,{X:function(){return d}});var r=n(67294),a=n(94184),s=n.n(a),i=n(38221),o=n(82355),c=n(3127),l=n.n(c),u=n(85893),d=(0,r.forwardRef)((function(e,t){return(0,u.jsxs)("div",{className:"text-left ".concat(e.className),children:[e.label&&(0,u.jsx)("label",{className:"text-rpmLight",htmlFor:e.name,children:e.label}),(0,u.jsxs)("div",{className:s()(l().fieldWithButton,"grid grid-cols-3"),children:[(0,u.jsx)("div",{className:"col-span-2",children:(0,u.jsx)(o.g,{id:e.id,name:e.name,ref:t,type:e.type||"text",value:e.fieldValue,placeholder:e.placeholder,onChange:e.onFieldChange})}),(0,u.jsx)("div",{className:"col-span-1",children:(0,u.jsx)(i.Z,{color:i.r.Primary,onClick:e.onClick,className:"mt-3",disabled:e.buttonDisabled,text:e.buttonText})})]})]})}))},85970:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(50029),a=n(16835),s=n(87794),i=n.n(s),o=n(67294),c=n(19428),l=n(74040),u=n(40782),d=n(16517),f=n(94184),p=n.n(f),m=n(50361),h=n.n(m),g=n(92777),x=n(82262),v=n(59499),w=n(3283),b=n.n(w),y=n(33084),j=function(){function e(){(0,g.Z)(this,e),(0,v.Z)(this,"account",""),(0,v.Z)(this,"networkId",0)}return(0,x.Z)(e,[{key:"init",value:function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=6;break}return window.web3=new(b())(window.ethereum),e.next=4,window.ethereum.enable();case 4:e.next=11;break;case 6:if(!window.web3){e.next=10;break}window.web3=new(b())(window.web3.currentProvider),e.next=11;break;case 10:throw new y.XF({resource:"wallet",code:"mm_absent"});case 11:return this.web3=window.web3,e.next=14,this.web3.eth.getAccounts();case 14:return t=e.sent,this.account=t[0],e.next=18,this.web3.eth.net.getId();case 18:this.networkId=e.sent;case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeContract",value:function(){var e=(0,r.Z)(i().mark((function e(t){var n,a,s,o,c,l,u,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=2;break}throw new y.XF({resource:"wallet",code:"init_wallet"});case 2:if(n=t.networks[this.networkId]){e.next=5;break}return e.abrupt("return",void 0);case 5:return a=t.abi,s=n.address,o=new this.web3.eth.Contract(a,s),e.next=10,o.methods.balanceOf(this.account).call();case 10:for(c=e.sent,l=[],u=0;u<c;u++)l.push(o.methods.tokenOfOwnerByIndex(this.account,u).call());return e.next=15,Promise.all(l);case 15:if(d=e.sent,!("getParentToken"in o.methods)){e.next=22;break}return f=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,o.methods.getParentToken(t).call();case 3:return e.t1=e.sent,e.abrupt("return",{token:e.t0,parentToken:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=d.map((function(e){return f(e)})),e.next=21,Promise.all(p);case 21:d=e.sent;case 22:return e.abrupt("return",{tokens:d});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"init",value:function(){var t=(0,r.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e,t.next=3,n.init();case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"isValidBrowser",get:function(){return!!window.ethereum||!!window.web3}}]),e}(),k=n(98709),_=n(34263),S=n(53781),N=n(67019),C=n(58413),z=n(57179),B=n(22695),D=n(728),O=n(565),P=n.n(O),T=n(85893),I="rpm-skipwalletpopup";function L(){return(L=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.abi){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.initializeContract(n.abi);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",r.tokens.map((function(e){var t={contractId:n.id,nftId:0};return"string"===typeof e?t.nftId=parseInt(e,10):(t.nftId=parseInt(e.token,10),t.parentNftId=parseInt(e.parentToken,10)),t})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e){var t,n=e.type,s=void 0===n?"button":n,f=e.authorizedOnly,m=e.autoDetect,g=e.onSuccess,x=(0,c.useTranslation)(["common","wallet"]).t,v=(0,d.useSelector)(S.dy),w=(0,d.useDispatch)(),b=(0,o.useState)(),y=b[0],O=b[1],Z=N.O0(),E=(0,a.Z)(Z,2),A=E[0],M=E[1],F=N.l6(),U=(0,a.Z)(F,2),R=U[0],V=U[1],G=V.isLoading||M.isLoading,H=(0,o.useMemo)((function(){return!m||j.isValidBrowser}),[m]),Q=(0,o.useState)(m&&H&&!(null!==(t=v.wallets)&&void 0!==t&&t.length)&&!(0,z.ej)(I)),W=Q[0],X=Q[1],J=(0,o.useMemo)((function(){return h()(M.data)||[]}),[M.data]),q=(0,o.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||v.isLoggedIn){e.next=3;break}return _.Z.emit("SIGNIN_CONFIRM"),e.abrupt("return");case 3:return e.prev=3,e.t0=O,e.next=7,j.init();case 7:e.t1=e.sent,(0,e.t0)(e.t1),A(),u.Am.info(x("wallet:loadingMessage")),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(3),w({type:"error",error:e.t2});case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),[v,A]),K=M.isSuccess&&y;(0,C.gx)(K,(function(){if(M.isSuccess&&y){var e=J.map((function(e){return function(e,t){return L.apply(this,arguments)}(y,e)}));Promise.all(e).then((function(e){return R({nfts:e.flat(),walletAddress:y.account})}))}}),[R]),(0,C.gx)(V.isSuccess,(function(){var e,t;null!==(e=V.data)&&void 0!==e&&e.length?(u.Am.success("".concat(x("wallet:successMessage"),": ").concat(null===(t=V.data)||void 0===t?void 0:t.length)),g()):u.Am.warning(x("wallet:noNftFound"),{autoClose:!1,hideProgressBar:!1})}),[V.data]);var Y=V.isError||M.isError;(0,C.gx)(Y,(function(){return u.Am.error(x("common:errors.commonMessage"))}));var $=(0,o.useCallback)((function(){(0,z.d8)(I,"true",{"max-age":604800}),X(!1)}),[]),ee=(0,o.useCallback)((function(){q(),X(!1)}),[q]);return H?(0,T.jsxs)(T.Fragment,{children:["button"===s?(0,T.jsxs)(k.z,{type:"primary",size:"large",disabled:!!G,icon:"metaMask",onClick:q,children:[!G&&x("wallet:connectBtn"),G&&(0,T.jsx)("div",{className:"ml-2",children:(0,T.jsx)(l.PulseLoader,{size:"8px"})})]}):(0,T.jsxs)("button",{type:"button",disabled:!!G,onClick:q,className:"relative",children:[(0,T.jsx)(B.J,{icon:"metaMask",size:36,className:p()({"opacity-50":G})}),G&&(0,T.jsx)("div",{className:p()(P().pulseLoader,"absolute left-0 right-0 top-2"),children:(0,T.jsx)(l.PulseLoader,{size:"6px"})})]}),W&&(0,T.jsx)(D.Z,{message:x("wallet:detectDialog.message"),cancelBtnText:x("wallet:detectDialog.cancelBtn"),confirmBtnText:x("wallet:detectDialog.confirmBtn"),onCancelCallback:$,onConfirmCallback:ee})]}):(0,T.jsx)(T.Fragment,{})}},33277:function(e,t,n){"use strict";n.d(t,{N3:function(){return u},ak:function(){return p},oA:function(){return l}});var r=n(50029),a=n(59499),s=n(87794),i=n.n(s);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t={};return t.bodyType=e.partnerData.config.body_type,t.assets=function(e){var t=e.partnerData,n=e.partnerAssets,r=e.avatarData,a=e.userData,s=e.textures,i=e.isFullBody,o={beard_color:t.beard_colors[a.beardColor],hair_color:t.hair_colors[a.hairColor],eye_url:n.eye.filterByGender(r.gender).findById(a.eyeColor).mask,head_scale:r.userData.head_scale,head_offset:r.userData.head_offset,hair_scale_x:r.userData.hair_scale_x,face_texture:s.texture,skin_tone:s.skin_texture},c=n.hair.filterByGender(r.gender).findById(a.hairStyle);a.hairStyle&&c.model&&(o.hair_url=c.model);var l=n.headwear.filterByGender(r.gender).findById(a.headwear);a.headwear&&l.model&&(o.headwear_url=l.model);var u=n.facewear.filterByGender(r.gender).findById(a.facewear);a.facewear&&u.model&&(o.facewear_url=u.model);var d=n.beard.filterByGender(r.gender).findById(a.beardStyle);a.beardStyle&&d.model&&(o.beard_url=d.model);i?o.body_url=n.outfit.filterByGender(r.gender).findById(a.outfit).model:o.shirt_url=n.shirt.filterByGender(r.gender).findById(a.shirt).model;var f=n.glasses.filterByGender(r.gender).findById(a.glasses);a.glasses&&f.model&&(o.glasses_url=f.model);return o}(c({},e)),t.referer=e.path,e.avatarUrl&&(t.avatarUrl=e.avatarUrl),t.avatarData=e.avatarData,t.userData=e.userData,t.partnerData=e.partnerData,t.userId=e.userId,t}function u(e,t){var n=e.reduce((function(e,t){return c(c({},e),{},(0,a.Z)({},t.id,t))}),{});return!!Object.values(t).find((function(e){var t=n[e];return(null===t||void 0===t?void 0:t.premium)&&!t.unlocked}))}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/avatar/request",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).success||console.log(r.message);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},34263:function(e,t,n){"use strict";var r=n(56387),a=new r.EventEmitter2,s={on:function(e,t){return a.on(e,t)},once:function(e,t){return a.once(e,t)},off:function(e){return a.off(e,(function(){}))},emit:function(e,t){return a.emit(e,t)}};Object.freeze(s),t.Z=s},74700:function(e,t,n){"use strict";var r,a,s,i;n.d(t,{Mr:function(){return u},Qz:function(){return o},Rj:function(){return i},U7:function(){return r},Y0:function(){return s},eA:function(){return a},rp:function(){return c}}),function(e){e[e.BodyTypeSelect=0]="BodyTypeSelect",e[e.GenderSelect=1]="GenderSelect",e[e.Instructions=2]="Instructions",e[e.AvatarSelect=3]="AvatarSelect",e[e.PhotoShoot=4]="PhotoShoot",e[e.PhotoPreview=5]="PhotoPreview",e[e.AvatarRequest=6]="AvatarRequest",e[e.AvatarView=7]="AvatarView",e[e.Idle=8]="Idle",e[e.Done=9]="Done"}(r||(r={})),function(e){e.FullBody="fullbody",e.VR="halfbody"}(a||(a={})),function(e){e.Male="male",e.Female="female",e.Nonbi=""}(s||(s={})),function(e){e.SkinTone="skin_tone",e.FaceShape="face_shape",e.NoseShape="nose_shape",e.EyeShape="eye_shape",e.LipShape="lip_shape",e.Shirt="shirt",e.HairStyle="hair_style",e.BeardStyle="beard_style",e.EyeColor="eye_color",e.EyebrowStyle="eyebrow_style",e.Glasses="glasses",e.FaceMask="face_mask",e.Facewear="facewear",e.Headwear="headwear"}(i||(i={}));var o,c,l,u;!function(e){e[e.Disabled=0]="Disabled",e[e.Loading=1]="Loading",e[e.Baking=2]="Baking",e[e.Failed=3]="Failed",e[e.Success=4]="Success"}(o||(o={})),function(e){e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary",e[e.Custom=2]="Custom"}(c||(c={})),function(e){e.Up="90",e.Down="270",e.Left="0",e.Right="180"}(l||(l={})),function(e){e.Default="default",e.Multiply="multiply",e.Subtract="subtract"}(u||(u={}))},68807:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(92777),a=n(82262),s=n(81531),i=n(63553),o=n(37247),c=n(59499);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var a=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var u=function(e){(0,s.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,null,[{key:"subscribe",value:function(e){window.addEventListener(this.eventName,e)}},{key:"unsubscribe",value:function(e){window.removeEventListener(this.eventName,e)}},{key:"dispatch",value:function(e){window.dispatchEvent(new CustomEvent(this.eventName,{detail:{category:e}}))}}]),n}((function e(){(0,r.Z)(this,e)}));(0,c.Z)(u,"eventName","customization-category-change")},52217:function(e,t,n){"use strict";n.d(t,{EH:function(){return o},EV:function(){return a},Lh:function(){return i},Lj:function(){return l},xr:function(){return s}});var r=n(2212);function a(e,t){var n=c(e),a=c(t),s=i(n.x*a.x,1,.1),o=i(n.y*a.y,1,.1),l=i(n.z*a.z,1,.1),u=i(n.w*a.w,1,.1);return new r.Vector4(s,o,l,u)}function s(e,t){var n=c(e),a=c(t),s=i(n.x+a.x,1,.1),o=i(n.y+a.y,1,.1),l=i(n.z+a.z,1,.1),u=i(n.w+a.w,1,.1);return new r.Vector4(s,o,l,u)}function i(e,t,n){return Math.min(Math.max(n,e),t)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return e*(1-n)+t*n}function c(e){e=function(e){if(null===e)return console.log("@param hex is null."),"";"#"===e[0]&&(e=e.substring(1,e.length));return e}(e);var t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,a=parseInt(e.substring(4,6),16)/255,s=1;return e.length>6&&(s=parseInt(e.substring(6,8),16)/255),new r.Vector4(t,n,a,s)}function l(e){var t="#";return t+=(255*e.x).toString(16).substring(0,2),t+=(255*e.y).toString(16).substring(0,2),t+=(255*e.z).toString(16).substring(0,2),t+=(255*e.w).toString(16).substring(0,2)}},79145:function(e){e.exports={pulseLoader:"BakeModals_pulseLoader__bzhgs",shortCode:"BakeModals_shortCode__hzrg_",downloadAvatar:"BakeModals_downloadAvatar__1KeeW",importToButton:"BakeModals_importToButton__CqTut",glowing:"BakeModals_glowing__c4pVg",poweredByLogo:"BakeModals_poweredByLogo__ncWiO"}},94545:function(e){e.exports={loader:"RenderStickers_loader__EcE4u",progress:"RenderStickers_progress__faGuf",stickers:"RenderStickers_stickers__W0g2X",profilePicture:"RenderStickers_profilePicture__Tsh2h",sticker:"RenderStickers_sticker___noWH"}},3127:function(e){e.exports={fieldWithButton:"FieldWithButton_fieldWithButton__zVOoL"}},565:function(e){e.exports={pulseLoader:"WalletConnect_pulseLoader__MaZdN"}},88677:function(){},62808:function(){},80950:function(){},46601:function(){},89214:function(){},96419:function(){},56353:function(){},8623:function(){},7748:function(){},85568:function(){},69386:function(){},31616:function(){},29120:function(){},46586:function(){},56619:function(){},22085:function(){},43503:function(){},55896:function(){},87500:function(){}}]);
